<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://wixtoolset.org/schemas/v4/wxs"
	 xmlns:ui="http://wixtoolset.org/schemas/v4/wxs/ui">

	<!-- UI -->

	<?foreach WIXUIARCH in X86;X64;A64 ?>
	<Fragment>
		<UI Id="CustomDlg_$(WIXUIARCH)">
			<Publish Dialog="LicenseAgreementDlg"
					 Control="Print"
					 Event="DoAction"
					 Value="WixUIPrintEula_$(WIXUIARCH)" />
			<Publish Dialog="BrowseDlg"
					 Control="OK"
					 Event="DoAction"
					 Value="WixUIValidatePath_$(WIXUIARCH)"
					 Order="3"
					 Condition="NOT WIXUI_DONTVALIDATEPATH" />
			<Publish Dialog="InstallDirDlg"
					 Control="Next"
					 Event="DoAction"
					 Value="WixUIValidatePath_$(WIXUIARCH)"
					 Order="2"
					 Condition="NOT WIXUI_DONTVALIDATEPATH" />
		</UI>

		<UIRef Id="CustomDlg" />
	</Fragment>
	<?endforeach?>

	
	<Fragment>
		<UI Id="CustomDlg">
			<TextStyle Id="WixUI_Font_Normal"
					   FaceName="Tahoma"
					   Size="8" />
			<TextStyle Id="WixUI_Font_Bigger"
					   FaceName="Tahoma"
					   Size="12" />
			<TextStyle Id="WixUI_Font_Title"
					   FaceName="Tahoma"
					   Size="9"
					   Bold="yes" />

			<Property Id="DefaultUIFont"
					  Value="WixUI_Font_Normal" />

			<DialogRef Id="BrowseDlg" />
			<DialogRef Id="DiskCostDlg" />
			<DialogRef Id="ErrorDlg" />
			<DialogRef Id="FatalError" />
			<DialogRef Id="FilesInUse" />
			<DialogRef Id="MsiRMFilesInUse" />
			<DialogRef Id="PrepareDlg" />
			<DialogRef Id="ProgressDlg" />
			<DialogRef Id="ResumeDlg" />
			<DialogRef Id="UserExit" />


			<!-- custom .net not found error dialog -->
			<Dialog Id="DotnetErrorDlg"
					Width="230"
					Height="85"
					Title="!(loc.DotnetErrorTitle)">
				<Control Id="OK"
						 Type="PushButton"
						 X="122"
						 Y="57"
						 Width="56"
						 Height="17"
						 Default="yes"
						 Cancel="yes"
						 Text="!(loc.WixUIOK)">
					<Publish Event="EndDialog"
							 Value="Exit"  />
				</Control>
				<!--
				<Control Id="DownloadDotNet"
						 Type="PushButton"
						 X="48"
						 Y="57"
						 Width="70"
						 Height="17"
						 Text="!(loc.DownloadUrl)">
					<Publish Event="DoAction"
							 Value="INSTALL_DOTNET_7" ></Publish>
				</Control>
				-->
				<Control Id="Text"
						 Type="Text"
						 X="48"
						 Y="15"
						 Width="194"
						 Height="30"
						 NoPrefix="yes"
						 Text="!(loc.DotnetErrorContent)" />
				<Control Id="Icon"
						 Type="Icon"
						 X="15"
						 Y="15"
						 Width="24"
						 Height="24"
						 ToolTip="!(loc.InvalidDirDlgIconTooltip)"
						 FixedSize="yes"
						 IconSize="32"
						 Text="!(loc.InvalidDirDlgIcon)" />
			</Dialog>

			<Publish Dialog="BrowseDlg"
					 Control="OK"
					 Event="SpawnDialog"
					 Value="InvalidDirDlg"
					 Order="4"
 />

			<Publish Dialog="ExitDialog"
					 Control="Finish"
					 Event="EndDialog"
					 Value="Return"
					 Order="999" />

			<Publish Dialog="WelcomeDlg"
					 Control="Next"
					 Event="NewDialog"
					 Value="InstallDirDlg"
					 Condition="NOT Installed" />
			<Publish Dialog="WelcomeDlg"
					 Control="Next"
					 Event="NewDialog"
					 Value="VerifyReadyDlg"
					 Condition="Installed AND PATCH" />

			<Publish Dialog="LicenseAgreementDlg"
					 Control="Back"
					 Event="NewDialog"
					 Value="WelcomeDlg" />
			<Publish Dialog="LicenseAgreementDlg"
					 Control="Next"
					 Event="NewDialog"
					 Value="InstallDirDlg"
					 Condition="LicenseAccepted = &quot;1&quot;" >
			</Publish>

			<Publish Dialog="InstallDirDlg"
					 Control="Back"
					 Event="NewDialog"
					 Value="LicenseAgreementDlg" />
			<Publish Dialog="InstallDirDlg"
					 Control="Next"
					 Event="SetTargetPath"
					 Value="[WIXUI_INSTALLDIR]"
					 Order="1" />
			<Publish Dialog="InstallDirDlg"
					 Control="Next"
					 Event="SpawnDialog"
					 Value="DotnetErrorDlg"
					 Order="3" />
			<Publish Dialog="InstallDirDlg"
					 Control="Next"
					 Event="NewDialog"
					 Value="VerifyReadyDlg"
					 Order="4" />


			<Publish Dialog="InstallDirDlg"
					 Control="ChangeFolder"
					 Property="_BrowseProperty"
					 Value="[WIXUI_INSTALLDIR]"
					 Order="1" />
			<Publish Dialog="InstallDirDlg"
					 Control="ChangeFolder"
					 Event="SpawnDialog"
					 Value="BrowseDlg"
					 Order="2" />


			<Publish Dialog="VerifyReadyDlg"
					 Control="Back"
					 Event="NewDialog"
					 Value="InstallDirDlg"
					 Order="1"
					 Condition="NOT Installed" />
			<Publish Dialog="VerifyReadyDlg"
					 Control="Back"
					 Event="NewDialog"
					 Value="MaintenanceTypeDlg"
					 Order="2"
					 Condition="Installed AND NOT PATCH" />
			<Publish Dialog="VerifyReadyDlg"
					 Control="Back"
					 Event="NewDialog"
					 Value="WelcomeDlg"
					 Order="2"
					 Condition="Installed AND PATCH" />

			<Publish Dialog="MaintenanceWelcomeDlg"
					 Control="Next"
					 Event="NewDialog"
					 Value="MaintenanceTypeDlg" />

			<Publish Dialog="MaintenanceTypeDlg"
					 Control="RepairButton"
					 Event="NewDialog"
					 Value="VerifyReadyDlg" />
			<Publish Dialog="MaintenanceTypeDlg"
					 Control="RemoveButton"
					 Event="NewDialog"
					 Value="VerifyReadyDlg" />
			<Publish Dialog="MaintenanceTypeDlg"
					 Control="Back"
					 Event="NewDialog"
					 Value="MaintenanceWelcomeDlg" />

			<Property Id="ARPNOMODIFY"
					  Value="1" />
		</UI>

		<UIRef Id="WixUI_Common" />


	</Fragment>
</Wix>
